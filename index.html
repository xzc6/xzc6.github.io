<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF压缩工具 - 在线免费压缩PDF文件</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#0FC6C2',
                        accent: '#722ED1',
                        success: '#00B42A',
                        warning: '#FF7D00',
                        danger: '#F53F3F',
                        dark: '#1D2129',
                        'dark-2': '#4E5969',
                        'light-1': '#F2F3F5',
                        'light-2': '#E5E6EB',
                        'light-3': '#C9CDD4'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 4px 20px rgba(0, 0, 0, 0.08)',
                        'card-hover': '0 10px 30px rgba(0, 0, 0, 0.12)',
                        'button': '0 2px 8px rgba(22, 93, 255, 0.2)',
                        'button-hover': '0 4px 12px rgba(22, 93, 255, 0.3)',
                    }
                },
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bg-gradient-blue {
                background: linear-gradient(135deg, #165DFF 0%, #0FC6C2 100%);
            }
            .text-gradient-blue {
                background: linear-gradient(135deg, #165DFF 0%, #0FC6C2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .animate-pulse-slow {
                animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .custom-scrollbar::-webkit-scrollbar {
                width: 6px;
            }
            .custom-scrollbar::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }
            .custom-scrollbar::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 10px;
            }
            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: #a8a8a8;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
    <!-- 顶部导航 -->
    <header class="bg-white shadow-sm sticky top-0 z-40 transition-all duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-center items-center">
                <div class="flex items-center space-x-2">
                    <div class="bg-gradient-blue h-8 w-8 rounded-lg flex items-center justify-center">
                        <i class="fa fa-file-pdf-o text-white text-xl"></i>
                    </div>
                    <span class="text-xl font-bold text-dark">PDF<span class="text-primary">压缩</span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- 主内容 -->
    <main class="flex-grow">
        <!-- 英雄区域 -->
        <section class="bg-gradient-to-br from-primary/5 to-white py-12 md:py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-dark mb-4 leading-tight">
                    在线压缩您的<span class="text-gradient-blue">PDF文件</span>
                </h1>
                <p class="text-dark-2 text-lg md:text-xl max-w-3xl mx-auto mb-8">
                    快速、安全地压缩PDF文件，不损失质量。适用于论文、报告、合同等各种PDF文档。
                </p>
            </div>
        </section>

        <!-- 上传区域 -->
        <section class="py-12 -mt-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white rounded-2xl shadow-card hover:shadow-card-hover transition-all-300 p-8 relative overflow-hidden">
                        <!-- 装饰元素 -->
                        <div class="absolute -right-10 -top-10 w-40 h-40 bg-primary/5 rounded-full"></div>
                        <div class="absolute -left-16 -bottom-16 w-48 h-48 bg-secondary/5 rounded-full"></div>
                        
                        <!-- 上传区域 -->
                        <div id="upload-container" class="relative z-10">
                            <div id="drop-area" class="border-2 border-dashed border-light-2 rounded-xl p-10 text-center cursor-pointer hover:border-primary/50 transition-all-300 bg-light-1/50">
                                <div class="mb-6">
                                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-4">
                                        <i class="fa fa-cloud-upload text-4xl text-primary"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold text-dark mb-2">拖放您的PDF文件到此处</h3>
                                    <p class="text-dark-2 mb-6">或者</p>
                                    <label for="file-input" class="px-6 py-3 bg-primary text-white rounded-lg shadow-button hover:shadow-button-hover hover:bg-primary/90 transition-all-300 cursor-pointer inline-flex items-center">
                                        <i class="fa fa-plus mr-2"></i> 选择文件
                                        <input type="file" id="file-input" accept=".pdf" class="hidden" />
                                    </label>
                                    <p class="text-dark-2 mt-4 text-sm">最大文件大小: 100MB</p>
                                </div>
                            </div>
                            
                            <!-- 压缩选项 -->
                            <div id="compression-options" class="mt-8 hidden">
                                <h3 class="text-lg font-semibold text-dark mb-4">压缩选项</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="compression-option border border-light-2 rounded-lg p-4 cursor-pointer hover:border-primary/50 transition-all-300 bg-white" data-level="low">
                                        <div class="flex items-start">
                                            <div class="mt-1 mr-3 w-5 h-5 rounded-full border-2 border-light-3 flex items-center justify-center compression-radio">
                                                <div class="w-3 h-3 rounded-full bg-primary hidden compression-radio-inner"></div>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-dark">低压缩</h4>
                                                <p class="text-dark-2 text-sm mt-1">保留最高质量，文件大小减少较少</p>
                                                <p class="text-success text-xs mt-1">推荐用于图片较多的文档</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="compression-option border border-light-2 rounded-lg p-4 cursor-pointer hover:border-primary/50 transition-all-300 bg-white bg-primary/5 border-primary/30" data-level="medium">
                                        <div class="flex items-start">
                                            <div class="mt-1 mr-3 w-5 h-5 rounded-full border-2 border-primary flex items-center justify-center compression-radio">
                                                <div class="w-3 h-3 rounded-full bg-primary compression-radio-inner"></div>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-dark">中等压缩</h4>
                                                <p class="text-dark-2 text-sm mt-1">平衡质量和文件大小</p>
                                                <p class="text-success text-xs mt-1">大多数文档的最佳选择</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="compression-option border border-light-2 rounded-lg p-4 cursor-pointer hover:border-primary/50 transition-all-300 bg-white" data-level="high">
                                        <div class="flex items-start">
                                            <div class="mt-1 mr-3 w-5 h-5 rounded-full border-2 border-light-3 flex items-center justify-center compression-radio">
                                                <div class="w-3 h-3 rounded-full bg-primary hidden compression-radio-inner"></div>
                                            </div>
                                            <div>
                                                <h4 class="font-medium text-dark">高压缩</h4>
                                                <p class="text-dark-2 text-sm mt-1">大幅减小文件大小，质量略有损失</p>
                                                <p class="text-success text-xs mt-1">推荐用于文本为主的文档</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 压缩按钮 -->
                                <div class="mt-6 text-center">
                                    <button id="compress-button" class="px-8 py-3 bg-primary text-white rounded-lg shadow-button hover:shadow-button-hover hover:bg-primary/90 transition-all-300 inline-flex items-center disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                        <i class="fa fa-compress mr-2"></i> 开始压缩
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 加载状态 -->
                        <div id="loading-container" class="relative z-10 hidden">
                            <div class="text-center py-8">
                                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 mb-6">
                                    <div class="w-12 h-12 border-4 border-primary/30 border-t-primary rounded-full animate-spin"></div>
                                </div>
                                <h3 class="text-xl font-semibold text-dark mb-2">正在处理您的PDF文件</h3>
                                <p class="text-dark-2 mb-4">请稍候，这可能需要几分钟时间...</p>
                                <div class="w-full bg-light-2 rounded-full h-2.5 mb-6">
                                    <div id="progress-bar" class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
                                </div>
                                <p id="progress-text" class="text-dark-2 text-sm">准备中...</p>
                            </div>
                        </div>
                        
                        <!-- 结果区域 -->
                        <div id="result-container" class="relative z-10 hidden">
                            <div class="flex flex-col md:flex-row items-center md:items-start gap-6">
                                <div class="flex-shrink-0">
                                    <div class="w-24 h-32 bg-light-1 rounded-lg flex items-center justify-center overflow-hidden">
                                        <i class="fa fa-file-pdf-o text-6xl text-primary/70"></i>
                                    </div>
                                </div>
                                
                                <div class="flex-grow">
                                    <h3 class="text-xl font-semibold text-dark mb-2" id="result-filename">compressed.pdf</h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                        <div>
                                            <p class="text-dark-2 text-sm mb-1">原始大小</p>
                                            <p class="font-medium text-dark" id="original-size">2.4 MB</p>
                                        </div>
                                        
                                        <div>
                                            <p class="text-dark-2 text-sm mb-1">压缩后</p>
                                            <p class="font-medium text-success" id="compressed-size">0.8 MB</p>
                                        </div>
                                        
                                        <div>
                                            <p class="text-dark-2 text-sm mb-1">压缩率</p>
                                            <p class="font-medium text-primary" id="compression-rate">67%</p>
                                        </div>
                                        
                                        <div>
                                            <p class="text-dark-2 text-sm mb-1">处理时间</p>
                                            <p class="font-medium text-dark" id="processing-time">12 秒</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-wrap gap-3">
                                        <button id="download-button" class="px-6 py-3 bg-primary text-white rounded-lg shadow-button hover:shadow-button-hover hover:bg-primary/90 transition-all-300 inline-flex items-center">
                                            <i class="fa fa-download mr-2"></i> 下载文件
                                        </button>
                                        <button id="compress-another-button" class="px-6 py-3 border border-light-2 text-dark rounded-lg hover:border-primary/50 hover:text-primary transition-all-300 inline-flex items-center">
                                            <i class="fa fa-plus mr-2"></i> 压缩另一个
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 功能特点 -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-dark mb-4">为什么选择我们的PDF压缩工具</h2>
                    <p class="text-dark-2 max-w-2xl mx-auto">我们提供高效、安全、高质量的PDF压缩服务，满足您的各种需求</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-light-1/50 rounded-xl p-6 transition-all-300 hover:shadow-card">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-bolt text-primary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-dark mb-3">快速高效</h3>
                        <p class="text-dark-2">几秒钟内完成PDF压缩，大幅减小文件大小，同时保持良好的文档质量。</p>
                    </div>
                    
                    <div class="bg-light-1/50 rounded-xl p-6 transition-all-300 hover:shadow-card">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-shield text-primary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-dark mb-3">安全可靠</h3>
                        <p class="text-dark-2">所有文件上传后会在24小时内自动删除，不会保留您的文档内容，确保隐私安全。</p>
                    </div>
                    
                    <div class="bg-light-1/50 rounded-xl p-6 transition-all-300 hover:shadow-card">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-sliders text-primary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-dark mb-3">多种压缩选项</h3>
                        <p class="text-dark-2">根据您的需求选择不同的压缩级别，平衡文件大小和质量，满足各种场景需求。</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 常见问题 -->
        <section class="py-16 bg-light-1/50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-dark mb-4">常见问题</h2>
                    <p class="text-dark-2 max-w-2xl mx-auto">了解更多关于我们PDF压缩工具的常见问题和解答</p>
                </div>
                
                <div class="max-w-3xl mx-auto">
                    <div class="space-y-4">
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                            <button class="faq-toggle w-full flex justify-between items-center p-5 text-left font-medium text-dark hover:bg-light-1/30 transition-all-300">
                                <span>PDF压缩会影响文档质量吗？</span>
                                <i class="fa fa-chevron-down text-primary transition-transform duration-300"></i>
                            </button>
                            <div class="faq-content px-5 pb-5 text-dark-2 hidden">
                                <p>我们的PDF压缩工具采用先进的算法，可以在大幅减小文件大小的同时保持文档的可读性和视觉效果。您可以根据需要选择不同的压缩级别：低压缩保留最高质量，高压缩则会牺牲一些质量以换取更小的文件大小。</p>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                            <button class="faq-toggle w-full flex justify-between items-center p-5 text-left font-medium text-dark hover:bg-light-1/30 transition-all-300">
                                <span>压缩后的PDF文件会保留所有原始内容吗？</span>
                                <i class="fa fa-chevron-down text-primary transition-transform duration-300"></i>
                            </button>
                            <div class="faq-content px-5 pb-5 text-dark-2 hidden">
                                <p>是的，压缩过程不会删除PDF中的任何文本、图像或其他内容。我们只会优化文件结构和压缩图像数据，以减小文件大小。所有的文字、表格、链接和交互元素都会保持完整。</p>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                            <button class="faq-toggle w-full flex justify-between items-center p-5 text-left font-medium text-dark hover:bg-light-1/30 transition-all-300">
                                <span>可以压缩多大的PDF文件？</span>
                                <i class="fa fa-chevron-down text-primary transition-transform duration-300"></i>
                            </button>
                            <div class="faq-content px-5 pb-5 text-dark-2 hidden">
                                <p>目前我们支持最大100MB的PDF文件上传和压缩。如果您有更大文件的压缩需求，请联系我们的客服团队，我们可以为您提供定制解决方案。</p>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                            <button class="faq-toggle w-full flex justify-between items-center p-5 text-left font-medium text-dark hover:bg-light-1/30 transition-all-300">
                                <span>我的文件上传后安全吗？</span>
                                <i class="fa fa-chevron-down text-primary transition-transform duration-300"></i>
                            </button>
                            <div class="faq-content px-5 pb-5 text-dark-2 hidden">
                                <p>我们非常重视用户数据的安全性。所有上传的文件都会被加密处理，并在24小时内自动删除。我们不会查看、存储或分享您的文档内容，您可以放心使用我们的服务。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="bg-gradient-blue h-8 w-8 rounded-lg flex items-center justify-center">
                            <i class="fa fa-file-pdf-o text-white text-xl"></i>
                        </div>
                        <span class="text-xl font-bold">PDF<span class="text-primary">压缩</span></span>
                    </div>
                    <p class="text-gray-400 mb-4">
                        在线免费压缩PDF文件，快速、安全、高效。
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-all-300">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all-300">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all-300">
                            <i class="fa fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all-300">
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">工具</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">PDF压缩</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">PDF合并</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">PDF拆分</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">PDF转Word</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">PDF转Excel</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">公司</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">关于我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">联系我们</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">隐私政策</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">服务条款</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-all-300">API服务</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">联系我们</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fa fa-envelope-o text-primary mt-1 mr-3"></i>
                            <span class="text-gray-400">support@pdfcompressor.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-phone text-primary mt-1 mr-3"></i>
                            <span class="text-gray-400">+86 123 4567 8910</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-map-marker text-primary mt-1 mr-3"></i>
                            <span class="text-gray-400">北京市海淀区中关村大街1号</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400 text-sm">
                <p>© 2025 PDF压缩工具. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // DOM元素
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('file-input');
        const uploadContainer = document.getElementById('upload-container');
        const compressionOptions = document.getElementById('compression-options');
        const loadingContainer = document.getElementById('loading-container');
        const resultContainer = document.getElementById('result-container');
        const compressButton = document.getElementById('compress-button');
        const downloadButton = document.getElementById('download-button');
        const compressAnotherButton = document.getElementById('compress-another-button');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const resultFilename = document.getElementById('result-filename');
        const originalSize = document.getElementById('original-size');
        const compressedSize = document.getElementById('compressed-size');
        const compressionRate = document.getElementById('compression-rate');
        const processingTime = document.getElementById('processing-time');
        const navbar = document.getElementById('navbar');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const faqToggles = document.querySelectorAll('.faq-toggle');
        
        // 存储上传的文件
        let uploadedFile = null;
        let compressionLevel = 'medium'; // 默认中等压缩
        
        // 导航栏滚动效果
        window.addEventListener('scroll', () => {
            if (window.scrollY > 10) {
                navbar.classList.add('shadow-md');
                navbar.classList.add('py-2');
                navbar.classList.remove('py-4');
            } else {
                navbar.classList.remove('shadow-md');
                navbar.classList.add('py-4');
                navbar.classList.remove('py-2');
            }
        });
        
        // 移动端菜单切换
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // FAQ切换
        faqToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                const content = toggle.nextElementSibling;
                const icon = toggle.querySelector('i');
                
                content.classList.toggle('hidden');
                icon.classList.toggle('rotate-180');
            });
        });
        
        // 拖拽上传相关
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            dropArea.classList.add('border-primary');
            dropArea.classList.add('bg-primary/5');
        }
        
        function unhighlight() {
            dropArea.classList.remove('border-primary');
            dropArea.classList.remove('bg-primary/5');
        }
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            
            if (files.length > 0) {
                handleFiles(files[0]);
            }
        }
        
        // 文件选择
        fileInput.addEventListener('change', () => {
            if (fileInput.files.length > 0) {
                handleFiles(fileInput.files[0]);
            }
        });
        
        // 处理选中的文件
        function handleFiles(file) {
            if (file.type !== 'application/pdf') {
                alert('请上传PDF格式的文件！');
                return;
            }
            
            uploadedFile = file;
            showCompressionOptions();
        }
        
        // 显示压缩选项
        function showCompressionOptions() {
            // 更新文件名和大小显示
            const fileSize = formatFileSize(uploadedFile.size);
            originalSize.textContent = fileSize;
            
            // 显示压缩选项
            compressionOptions.classList.remove('hidden');
            compressButton.disabled = false;
            
            // 滚动到压缩选项
            compressionOptions.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // 压缩选项切换
        const compressionOptionElements = document.querySelectorAll('.compression-option');
        compressionOptionElements.forEach(option => {
            option.addEventListener('click', () => {
                // 重置所有选项
                compressionOptionElements.forEach(opt => {
                    opt.classList.remove('bg-primary/5');
                    opt.classList.remove('border-primary/30');
                    opt.classList.add('bg-white');
                    
                    const radio = opt.querySelector('.compression-radio');
                    radio.classList.remove('border-primary');
                    radio.classList.add('border-light-3');
                    
                    const radioInner = opt.querySelector('.compression-radio-inner');
                    radioInner.classList.add('hidden');
                });
                
                // 设置选中的选项
                option.classList.add('bg-primary/5');
                option.classList.add('border-primary/30');
                option.classList.remove('bg-white');
                
                const radio = option.querySelector('.compression-radio');
                radio.classList.add('border-primary');
                radio.classList.remove('border-light-3');
                
                const radioInner = option.querySelector('.compression-radio-inner');
                radioInner.classList.remove('hidden');
                
                // 保存选中的压缩级别
                compressionLevel = option.dataset.level;
            });
        });
        
        // 压缩按钮点击
        compressButton.addEventListener('click', async () => {
            if (!uploadedFile) return;
            
            // 显示加载状态
            uploadContainer.classList.add('hidden');
            loadingContainer.classList.remove('hidden');
            
            // 模拟进度
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress > 90) {
                    progress = 90;
                    clearInterval(interval);
                }
                
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `压缩中... ${Math.floor(progress)}%`;
            }, 300);
            
            // 模拟压缩过程
            const startTime = Date.now();
            await simulateCompression(uploadedFile, compressionLevel);
            const endTime = Date.now();
            
            // 更新进度到100%
            progressBar.style.width = '100%';
            progressText.textContent = '压缩完成！';
            
            // 计算处理时间
            const processTime = Math.floor((endTime - startTime) / 1000);
            
            // 显示结果
            setTimeout(() => {
                loadingContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                
                // 更新结果显示
                resultFilename.textContent = uploadedFile.name;
                
                // 计算压缩后的大小（模拟）
                const originalSizeBytes = uploadedFile.size;
                let compressedSizeBytes;
                
                switch (compressionLevel) {
                    case 'low':
                        compressedSizeBytes = Math.floor(originalSizeBytes * 0.7);
                        break;
                    case 'medium':
                        compressedSizeBytes = Math.floor(originalSizeBytes * 0.4);
                        break;
                    case 'high':
                        compressedSizeBytes = Math.floor(originalSizeBytes * 0.2);
                        break;
                    default:
                        compressedSizeBytes = Math.floor(originalSizeBytes * 0.4);
                }
                
                compressedSize.textContent = formatFileSize(compressedSizeBytes);
                
                // 计算压缩率
                const reduction = 100 - Math.floor((compressedSizeBytes / originalSizeBytes) * 100);
                compressionRate.textContent = `${reduction}%`;
                
                // 显示处理时间
                processingTime.textContent = `${processTime} 秒`;
                
                // 滚动到结果区域
                resultContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 1000);
        });
        
        // 下载按钮点击
        downloadButton.addEventListener('click', () => {
            // 创建一个临时的Blob对象来模拟压缩后的PDF文件
            const compressedFile = new Blob([new ArrayBuffer(1024)], { type: 'application/pdf' });
            
            // 创建下载链接
            const url = URL.createObjectURL(compressedFile);
            const a = document.createElement('a');
            a.href = url;
            a.download = uploadedFile.name.replace('.pdf', '_compressed.pdf');
            document.body.appendChild(a);
            a.click();
            
            // 清理
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        });
        
        // 压缩另一个文件按钮点击
        compressAnotherButton.addEventListener('click', () => {
            resultContainer.classList.add('hidden');
            uploadContainer.classList.remove('hidden');
            fileInput.value = '';
            uploadedFile = null;
            
            // 重置进度条
            progressBar.style.width = '0%';
            progressText.textContent = '准备中...';
            
            // 滚动到上传区域
            dropArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
        
        // 模拟压缩过程
        async function simulateCompression(file, level) {
            // 实际应用中，这里会调用PDF压缩库或API
            return new Promise(resolve => {
                setTimeout(() => resolve(), 3000);
            });
        }
        
        // 格式化文件大小
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
